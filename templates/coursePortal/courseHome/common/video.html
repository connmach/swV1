{% extends "coursePortal/courseHome/common/baseTaskTemp.html" %}
{% block title %} the_title {% endblock %}



{% block body %}

 <div  style="height:80%;padding:0 0 0 0;position:relative;">
        <iframe
            src="https://player.vimeo.com/video/{{videoId}}?h=99d34cd2d0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479"
            frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen
            style="position:absolute;top:0;left:0;width:100%;height:100%;" title="v001.mp4">
        </iframe></div>
<div class="footer">
 
    <div class="buttons">
 
         <a id="submit" class="button primary" title="Control+Enter" > Submit </a>

    </div>
</div>




    <script src="https://player.vimeo.com/api/player.js"></script>

    <script>
        var iframe = document.querySelector('iframe');
        var vPlayer = new Vimeo.Player(iframe);

        vPlayer.getCurrentTime().then(function(currentTime) {console.log("started")});
        vPlayer.setCurrentTime({{currentTime}}).then(function(currentTime) {console.log("started")});

        vPlayer.on('play', function () {
            console.log('played the video!');

            
    setInterval(function ()
    {
        console.log(iframe);
        console.log(vPlayer);
        var currtym = vPlayer.getCurrentTime();
        console.log(">>>>>>test")
 
        var currentTime = 0;
      //  vPlayer.setCurrentTime(30).then(function(currentTime) {});        
       vPlayer.on('timeupdate', function (getAll)
        {
            currentPos = getAll.seconds; //get currentime
            vdoEndTym = getAll.duration; //get video duration
            percentage = (getAll.percent * 100)+"%";
            console.log('currentPos: ' + currentPos);
            console.log('percentage: ' + percentage);
            updateLearninghistory()  
        });
          
        vPlayer.on('ended', function ()
        {
            clearInterval(vdo_play);
        });
        console.log(currentTime);
    }, 1000);
 
        });

    vPlayer.getVideoTitle().then(function (title) {
            console.log('title:', title);
        });

     function updateLearninghistory(taskId,progress,status){


     }
    </script>

{% endblock %}